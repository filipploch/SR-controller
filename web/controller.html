<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kontroler OBS</title>
    <link rel="stylesheet" href="/static/css/shared.css">
    <link rel="stylesheet" href="/static/css/controller.css">
    <link rel="stylesheet" href="/static/css/settings.css">
    <link rel="stylesheet" href="/static/css/media_modal.css">
    <link rel="stylesheet" href="/static/css/vlc_group_modal.css">
    <link rel="stylesheet" href="/static/css/camera_type_modal.css">
    <link rel="stylesheet" href="/static/css/cameras.css">
    <link rel="stylesheet" href="/static/css/microphone_modal.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Kontroler OBS</h1>
            <div class="status">
                <div id="openSettings" class="status-item">
                    <span>‚öôÔ∏è Ustawienia</span>
                </div>
                <div class="status-item">
                    <div class="status-dot" id="seasonStatus"></div>
                    <span class="status-text" id="seasonText">Sezon</span>
                </div>
                <div class="status-item">
                    <div class="status-dot" id="episodeStatus"></div>
                    <span class="status-text" id="episodeText">Odcinek</span>
                </div>
                <div class="status-item">
                    <div class="status-dot" id="socketStatus"></div>
                    <span>Socket.IO</span>
                </div>
                <div class="status-item">
                    <div class="status-dot" id="obsStatus"></div>
                    <span>OBS</span>
                </div>
            </div>
        </div>
        
        <div id="warningContainer"></div>

        <div id="controllerWindow" class="content-window controller-grid">
            <!-- Panel sterowania OBS -->
            <div class="obs-control-panel">
                <h3>Sterowanie OBS</h3>
                <div class="obs-controls">
                    <button class="obs-btn" onclick="obsStartStreaming()">‚ñ∂Ô∏è Start Stream</button>
                    <button class="obs-btn" onclick="obsStopStreaming()">‚èπÔ∏è Stop Stream</button>
                    <button class="obs-btn" onclick="obsStartRecording()">üî¥ Start Nagrywanie</button>
                    <button class="obs-btn" onclick="obsStopRecording()">‚èπÔ∏è Stop Nagrywanie</button>
                    <button class="obs-btn" onclick="obsToggleStudioMode()">üé¨ Studio Mode</button>
                    <button class="obs-btn" onclick="obsTransition()">üîÄ Transition</button>
                </div>
            </div>

            <!-- Panel KAMERY -->
            <div class="scene-panel" data-scene="KAMERY">
                <h3>Kamery</h3>
                <div class="sources-list" id="sourcesKamery">
                    <div class="loading">≈Åadowanie...</div>
                </div>
                <button class="save-order-btn" id="saveKamery" onclick="saveSourceOrder('KAMERY')">üíæ Zapisz</button>
            </div>

            <!-- Panel z zak≈Çadkami MEDIA/REPORTA≈ªE -->
            <div class="scene-panel-tabbed">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="media" onclick="switchControllerTab('media-reportaze', 'media')">Media</button>
                    <button class="tab-btn" data-tab="reportaze" onclick="switchControllerTab('media-reportaze', 'reportaze')">Reporta≈ºe</button>
                </div>

                <div class="tab-content active" id="tabMedia" data-scene="MEDIA">
                    <div class="sources-list" id="sourcesMedia">
                        <div class="loading">≈Åadowanie...</div>
                    </div>
                    <button class="save-order-btn" id="saveMedia" onclick="saveSourceOrder('MEDIA')">üíæ Zapisz</button>
                </div>

                <div class="tab-content" id="tabReportaze" data-scene="REPORTAZE">
                    <div class="sources-list" id="sourcesReportaze">
                        <div class="loading">≈Åadowanie...</div>
                    </div>
                    <button class="save-order-btn" id="saveReportaze" onclick="saveSourceOrder('REPORTAZE')">üíæ Zapisz</button>
                </div>
            </div>

            <!-- Panel z zak≈Çadkami MIKROFONY/MUZYKA -->
            <div class="scene-panel-tabbed">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="mikrofony" onclick="switchControllerTab('mikrofony-muzyka', 'mikrofony')">Mikrofony</button>
                    <button class="tab-btn" data-tab="muzyka" onclick="switchControllerTab('mikrofony-muzyka', 'muzyka')">Muzyka</button>
                </div>

                <div class="tab-content active" id="tabMikrofony" data-scene="MIKROFONY">
                    <div class="sources-list" id="sourcesMikrofony">
                        <div class="loading">≈Åadowanie...</div>
                    </div>
                    <button class="save-order-btn" id="saveMikrofony" onclick="saveSourceOrder('MIKROFONY')">üíæ Zapisz</button>
                </div>

                <div class="tab-content" id="tabMuzyka" data-scene="MUZYKA">
                    <div class="sources-list" id="sourcesMuzyka">
                        <div class="loading">≈Åadowanie...</div>
                    </div>
                    <button class="save-order-btn" id="saveMuzyka" onclick="saveSourceOrder('MUZYKA')">üíæ Zapisz</button>
                </div>
            </div>
        </div>
        <div id="settingsWindow" class="content-window hidden">
            <div class="navigation-card">
                <h2>Konfiguracja</h2>
                <div class="nav-links">
                    
                    <button onclick="showContentWindow('seasonsWindow');" class="nav-link">üìÖ Sezony</button>
                    <button onclick="showContentWindow('episodesWindow');" class="nav-link">üé¨ Odcinki</button>
                    <button onclick="showContentWindow('camerasWindow');" class="nav-link">üìπ Kamery</button>
                </div>
            </div>

            <div class="navigation-card">
                <h2>Panel Kontrolny</h2>
                <div class="nav-links">
                    <button onclick="showContentWindow('controllerWindow');" class="nav-link primary" id="controllerLink">üéõÔ∏è Kontroler</button>
                </div>
            </div>
        </div>
        <div id="seasonsWindow" class="content-window hidden">
            <div class="toolbar">
                <div></div>
                <button class="btn btn-primary btn-small" onclick="openCreateSeasonModal()">+ Nowy Sezon</button>
            </div>

            <div class="scrollable">
                <table class="table">
                    <thead>
                        <tr>
                            <th style="width: 60px;">Numer</th>
                            <th>Opis</th>
                            <th style="width: 80px;">Status</th>
                            <th style="width: 120px;">Akcje</th>
                        </tr>
                    </thead>
                    <tbody id="seasonsTableBody">
                        <tr>
                            <td colspan="4" class="loading">≈Åadowanie...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>       
        <div id="episodesWindow" class="content-window hidden">
            <div class="toolbar">
                <div class="filter-group">
                    <label style="font-size: 10px; color: #aaa;">Sezon:</label>
                    <select class="form-control" id="seasonFilter" onchange="loadEpisodes()">
                        <option value="">Wszystkie</option>
                    </select>
                </div>
                <button class="btn btn-primary btn-small" onclick="openCreateEpisodeModal()">+ Nowy Odcinek</button>
            </div>

            <div class="scrollable">
                <table class="table">
                    <thead>
                        <tr>
                            <th style="width: 60px;">Nr</th>
                            <th style="width: 60px;">Sezon</th>
                            <th>Tytu≈Ç</th>
                            <th style="width: 100px;">Data</th>
                            <th style="width: 80px;">Status</th>
                            <th style="width: 140px;">Akcje</th>
                        </tr>
                    </thead>
                    <tbody id="episodesTableBody">
                        <tr>
                            <td colspan="6" class="loading">≈Åadowanie...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div id="camerasWindow" class="content-window hidden">
            <!-- Panel typ√≥w kamer -->
            <div class="panel">
                <div class="panel-header">
                    <h2>Typy Kamer</h2>
                    <button class="btn btn-primary btn-small" onclick="openCameraTypeModalForManagement()">+ Dodaj Typ</button>
                </div>
                <div class="scrollable" id="cameraTypesContainer">
                    <div class="loading">≈Åadowanie...</div>
                </div>
            </div>

            <!-- Panel informacyjny -->
            <div class="info-panel">
                <div class="info-icon">üìπ</div>
                <div class="info-title">Typy Kamer</div>
                <div class="info-text">
                    ZarzƒÖdzaj typami kamer u≈ºywanych w systemie kontrolera OBS.
                </div>
                <ul class="info-list">
                    <li><strong>Typy systemowe</strong> - predefiniowane, nie mo≈ºna edytowaƒá ani usunƒÖƒá</li>
                    <li><strong>Typy u≈ºytkownika</strong> - mo≈ºna dodawaƒá, edytowaƒá i usuwaƒá</li>
                    <li><strong>Kolejno≈õƒá</strong> - okre≈õla domy≈õlne przypisanie do kamer (Kamera1-4)</li>
                    <li><strong>Auto-przypisanie</strong> - Kamera1‚ÜíCentralna, Kamera2‚ÜíProwadzƒÖcy, itd.</li>
                </ul>
                <div class="info-text" style="margin-top: 15px; font-size: 9px; color: #666;">
                    Typy systemowe: Centralna, ProwadzƒÖcy, Go≈õcie, Dodatkowa
                </div>
            </div>
        </div>
    </div>
    

    <!-- Modal wyboru medi√≥w -->
    <div id="mediaModalOverlay" class="media-modal-overlay">
        <div class="media-modal">
            <div class="media-modal-header">
                <h3 id="mediaModalTitle">Wybierz media</h3>
                <button id="mediaModalClose" class="media-modal-close">√ó</button>
            </div>
            <div id="mediaModalBody" class="media-modal-body">
                <!-- Zawarto≈õƒá generowana dynamicznie -->
            </div>
        </div>
    </div>

    <!-- Modal wyboru grupy VLC -->
    <div id="vlcGroupModalOverlay" class="vlc-group-modal-overlay">
        <div class="vlc-group-modal">
            <div class="vlc-group-modal-header">
                <h3 id="vlcGroupModalTitle">Wybierz grupƒô</h3>
                <button id="vlcGroupModalClose" class="vlc-group-modal-close">√ó</button>
            </div>
            <div id="vlcGroupModalBody" class="vlc-group-modal-body">
                <!-- Zawarto≈õƒá generowana dynamicznie -->
            </div>
        </div>
    </div>

    <!-- Modal wyboru typu kamery -->
    <div id="cameraTypeModalOverlay" class="camera-type-modal-overlay">
        <div class="camera-type-modal">
            <div class="camera-type-modal-header">
                <h3 id="cameraTypeModalTitle">Wybierz typ kamery</h3>
                <button id="cameraTypeModalClose" class="camera-type-modal-close">√ó</button>
            </div>
            <div id="cameraTypeModalBody" class="camera-type-modal-body">
                <!-- Zawarto≈õƒá generowana dynamicznie -->
            </div>
        </div>
    </div>

    <!-- Modal przypisania osoby do mikrofonu -->
    <div id="microphoneModalOverlay" class="microphone-modal-overlay">
        <div class="microphone-modal">
            <div class="microphone-modal-header">
                <h3 id="microphoneModalTitle">Przypisz osobƒô</h3>
                <button id="microphoneModalClose">√ó</button>
            </div>
            <div id="microphoneModalBody">
                <!-- Zawarto≈õƒá generowana dynamicznie -->
            </div>
        </div>
    </div>
    
    <!-- Modal tworzenia/edycji sezonu -->
    <div class="modal" id="seasonModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalSeasonTitle">Nowy Sezon</h2>
                <button class="modal-close" onclick="closeSeasonModal()">&times;</button>
            </div>
            <form id="seasonForm">
                <input type="hidden" id="seasonId">
                <div class="form-group">
                    <label for="seasonNumber">Numer Sezonu *</label>
                    <input type="number" class="form-control" id="seasonNumber" required min="1">
                </div>
                <div class="form-group">
                    <label for="seasonDescription">Opis</label>
                    <textarea class="form-control" id="seasonDescription" placeholder="Opcjonalny opis sezonu..."></textarea>
                </div>
                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="seasonIsCurrent">
                        <label for="seasonIsCurrent">Ustaw jako aktualny sezon</label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" onclick="closeSeasonModal()">Anuluj</button>
                    <button type="submit" class="btn btn-primary">Zapisz</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Modal tworzenia/edycji ocinka -->
    <div class="modal" id="episodeModal">
        <div class="modal-content modal-content-large">
            <div class="modal-header">
                <h2 id="modalEpisodeTitle">Nowy Odcinek</h2>
                <button type="button" class="modal-close" onclick="closeEpisodeModal()">&times;</button>
            </div>

            <!-- Zak≈Çadki -->
            <div class="modal-tabs">
                <button class="modal-tab active" onclick="switchEpisodeTab('data', this)">Dane Odcinka</button>
                <button class="modal-tab" onclick="switchEpisodeTab('staff', this)">Ekipa</button>
                <button class="modal-tab" onclick="switchEpisodeTab('guests', this)">Go≈õcie</button>
                <button class="modal-tab" onclick="switchEpisodeTab('media', this)">Media</button>
            </div>

            <!-- Zak≈Çadka: Dane Odcinka -->
            <div id="tabData" class="tab-content active">
                <form id="episodeForm">
                    <input type="hidden" id="episodeId">
                    <div class="form-group">
                        <label for="episodeSeason">Sezon *</label>
                        <select class="form-control" id="episodeSeason" required>
                            <option value="">Wybierz sezon...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="episodeNumber">Numer Odcinka (ciƒÖg≈Çy) *</label>
                        <input type="number" class="form-control" id="episodeNumber" required min="1">
                    </div>
                    <div class="form-group">
                        <label for="seasonEpisode">Numer w Sezonie *</label>
                        <input type="number" class="form-control" id="seasonEpisode" required min="1">
                    </div>
                    <div class="form-group">
                        <label for="episodeTitle">Tytu≈Ç *</label>
                        <input type="text" class="form-control" id="episodeTitle" required>
                    </div>
                    <div class="form-group">
                        <label for="episodeDate">Data Odcinka (YYYY-MM-DD)</label>
                        <input type="text" class="form-control" id="episodeDate" placeholder="YYYY-MM-DD" pattern="\d{4}-\d{2}-\d{2}" title="Format: YYYY-MM-DD (np. 2024-12-31)">
                    </div>
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="episodeIsCurrent">
                            <label for="episodeIsCurrent">Ustaw jako aktualny odcinek</label>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Zak≈Çadka: Ekipa -->
            <div id="tabStaff" class="tab-content">
                <div class="scrollable-tab">
                    <div style="margin-bottom: 15px; display: flex; gap: 8px;">
                        <button class="btn btn-primary btn-small" onclick="openAddStaffModal()">+ Nowy Cz≈Çonek Ekipy</button>
                        <button class="btn btn-secondary btn-small" onclick="openAddStaffTypeModal()">+ Nowy Typ Ekipy</button>
                    </div>
                    
                    <div class="assignment-section">
                        <div class="assignment-list">
                            <h4>Dostƒôpni</h4>
                            <div id="availableStaffList"></div>
                        </div>
                        <div class="assignment-list">
                            <h4>Przypisani do odcinka</h4>
                            <div id="assignedStaffList"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Zak≈Çadka: Go≈õcie -->
            <div id="tabGuests" class="tab-content">
                <div class="scrollable-tab">
                    <div style="margin-bottom: 15px; display: flex; gap: 8px;">
                        <button class="btn btn-primary btn-small" onclick="openAddGuestModal()">+ Nowy Go≈õƒá</button>
                        <button class="btn btn-secondary btn-small" onclick="openAddGuestTypeModal()">+ Nowy Typ Go≈õcia</button>
                    </div>
                    
                    <div class="assignment-section">
                        <div class="assignment-list">
                            <h4>Dostƒôpni</h4>
                            <div id="availableGuestsList"></div>
                        </div>
                        <div class="assignment-list">
                            <h4>Przypisani do odcinka</h4>
                            <div id="assignedGuestsList"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Zak≈Çadka: Media -->
            <div id="tabMedia" class="tab-content">
                <!-- Pod-zak≈Çadki Media -->
                <div class="sub-tabs">
                    <button class="sub-tab active" onclick="switchMediaSubTab('all', this)">Wszystkie</button>
                    <button class="sub-tab" onclick="switchMediaSubTab('assigned', this)">Przypisane</button>
                    <button class="sub-tab" onclick="switchMediaSubTab('groups', this)">Grupy</button>
                </div>

                <!-- Pod-zak≈Çadka: Wszystkie -->
                <div id="mediaSubTabAll" class="sub-tab-content active">
                    <div class="scrollable-tab">
                        <div style="margin-bottom: 15px;">
                            <h4 style="margin-bottom: 10px;">Dostƒôpne pliki w folderze sezonu:</h4>
                            <div class="media-files-grid" id="mediaFilesGrid">
                                <div style="grid-column: 1/-1; text-align: center; padding: 20px; color: #666;">
                                    ≈Åadowanie...
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pod-zak≈Çadka: Przypisane -->
                <div id="mediaSubTabAssigned" class="sub-tab-content">
                    <div class="scrollable-tab">
                        <div style="margin-top: 20px;">
                            <h4 style="margin-bottom: 15px;">Wszystkie media przypisane do odcinka:</h4>
                            <div class="assigned-media-list" id="assignedMediaList">
                                <div style="text-align: center; padding: 20px; color: #666; font-size: 11px;">
                                    Brak przypisanych medi√≥w
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pod-zak≈Çadka: Grupy -->
                <div id="mediaSubTabGroups" class="sub-tab-content">
                    <div class="scrollable-tab">
                        <div style="margin-top: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <h4>Grupy Medi√≥w:</h4>
                                <button class="btn btn-primary btn-small" onclick="openAddMediaGroupModal()">+ Nowa Grupa</button>
                            </div>
                            
                            <!-- Grupy systemowe -->
                            <div style="margin-bottom: 20px;">
                                <h5 style="font-size: 11px; color: #888; text-transform: uppercase; margin-bottom: 10px;">Grupy systemowe (nie mo≈ºna usunƒÖƒá)</h5>
                                <div id="systemGroupsList"></div>
                            </div>
                            
                            <!-- Grupy u≈ºytkownika -->
                            <div>
                                <h5 style="font-size: 11px; color: #888; text-transform: uppercase; margin-bottom: 10px;">Grupy u≈ºytkownika</h5>
                                <div id="userGroupsList">
                                    <div style="text-align: center; padding: 20px; color: #666; font-size: 11px;">
                                        Brak grup u≈ºytkownika
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn" onclick="closeEpisodeModal()">Zamknij</button>
                <button type="button" class="btn btn-primary" onclick="saveEpisode()">Zapisz Odcinek</button>
            </div>
        </div>
    </div>

    <!-- Modal dodawania Staff -->
    <div class="modal" id="addStaffModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Nowy Cz≈Çonek Ekipy</h2>
                <button type="button" class="modal-close" onclick="closeAddStaffModal()">&times;</button>
            </div>
            <form id="addStaffForm">
                <div class="form-group">
                    <label for="staffFirstName">Imiƒô *</label>
                    <input type="text" class="form-control" id="staffFirstName" required>
                </div>
                <div class="form-group">
                    <label for="staffLastName">Nazwisko *</label>
                    <input type="text" class="form-control" id="staffLastName" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" onclick="closeAddStaffModal()">Anuluj</button>
                    <button type="submit" class="btn btn-primary">Dodaj</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal dodawania StaffType -->
    <div class="modal" id="addStaffTypeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Nowy Typ Cz≈Çonka Ekipy</h2>
                <button type="button" class="modal-close" onclick="closeAddStaffTypeModal()">&times;</button>
            </div>
            <form id="addStaffTypeForm">
                <div class="form-group">
                    <label for="staffTypeName">Nazwa Typu *</label>
                    <input type="text" class="form-control" id="staffTypeName" required placeholder="np. Redaktor prowadzƒÖcy, Operator kamery">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" onclick="closeAddStaffTypeModal()">Anuluj</button>
                    <button type="submit" class="btn btn-primary">Dodaj</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal dodawania Guest -->
    <div class="modal" id="addGuestModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Nowy Go≈õƒá</h2>
                <button type="button" class="modal-close" onclick="closeAddGuestModal()">&times;</button>
            </div>
            <form id="addGuestForm">
                <div class="form-group">
                    <label for="guestFirstName">Imiƒô *</label>
                    <input type="text" class="form-control" id="guestFirstName" required>
                </div>
                <div class="form-group">
                    <label for="guestLastName">Nazwisko *</label>
                    <input type="text" class="form-control" id="guestLastName" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" onclick="closeAddGuestModal()">Anuluj</button>
                    <button type="submit" class="btn btn-primary">Dodaj</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal dodawania GuestType -->
    <div class="modal" id="addGuestTypeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Nowy Typ Go≈õcia</h2>
                <button type="button" class="modal-close" onclick="closeAddGuestTypeModal()">&times;</button>
            </div>
            <form id="addGuestTypeForm">
                <div class="form-group">
                    <label for="guestTypeName">Nazwa Typu *</label>
                    <input type="text" class="form-control" id="guestTypeName" required placeholder="np. Ekspert, Artysta, Polityk">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" onclick="closeAddGuestTypeModal()">Anuluj</button>
                    <button type="submit" class="btn btn-primary">Dodaj</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal przypisywania Media -->
    <div class="modal" id="assignMediaModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Przypisz Media</h2>
                <button type="button" class="modal-close" onclick="closeAssignMediaModal()">&times;</button>
            </div>
            <form id="assignMediaForm">
                <input type="hidden" id="mediaFilePath">
                <input type="hidden" id="mediaFileDuration">
                <div class="form-group">
                    <label>Plik</label>
                    <div style="padding: 8px; background: #1a1a1a; border-radius: 4px; font-size: 12px;" id="mediaFileName"></div>
                </div>
                <div class="form-group">
                    <label for="mediaTitle">Tytu≈Ç *</label>
                    <input type="text" class="form-control" id="mediaTitle" required>
                </div>
                <div class="form-group">
                    <label for="mediaDescription">Opis</label>
                    <textarea class="form-control" id="mediaDescription" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="mediaStaff">Autor</label>
                    <select class="form-control" id="mediaStaff">
                        <option value="">Brak</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="mediaGroupsSelect">Grupy * (mo≈ºna wybraƒá wiele z Ctrl/Cmd)</label>
                    <select class="form-control" id="mediaGroupsSelect" multiple style="height: 150px;" required>
                    </select>
                    <div style="font-size: 10px; color: #888; margin-top: 5px;">
                        Przytrzymaj Ctrl (Windows/Linux) lub Cmd (Mac) aby wybraƒá wiele grup
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" onclick="closeAssignMediaModal()">Anuluj</button>
                    <button type="submit" class="btn btn-primary">Przypisz</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal edycji typ√≥w Staff -->
    <div class="modal" id="editStaffTypesModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edytuj Typy Cz≈Çonka Ekipy</h2>
                <button type="button" class="modal-close" onclick="closeEditStaffTypesModal()">&times;</button>
            </div>
            <form id="editStaffTypesForm">
                <input type="hidden" id="editStaffAssignmentId">
                <div class="form-group">
                    <label>Cz≈Çonek ekipy</label>
                    <div style="padding: 8px; background: #1a1a1a; border-radius: 4px; font-size: 12px;" id="editStaffName"></div>
                </div>
                <div class="form-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <label for="editStaffTypesSelect">Typy (mo≈ºna wybraƒá wiele z Ctrl/Cmd)</label>
                        <button type="button" class="btn btn-secondary btn-small" onclick="openAddStaffTypeModalFromEdit()">+ Nowy Typ</button>
                    </div>
                    <select class="form-control" id="editStaffTypesSelect" multiple style="height: 150px;">
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" onclick="closeEditStaffTypesModal()">Anuluj</button>
                    <button type="submit" class="btn btn-primary">Zapisz</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal edycji Go≈õcia w odcinku -->
    <div class="modal" id="editGuestModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edytuj Go≈õcia</h2>
                <button type="button" class="modal-close" onclick="closeEditGuestModal()">&times;</button>
            </div>
            <form id="editGuestForm">
                <input type="hidden" id="editGuestAssignmentId">
                <div class="form-group">
                    <label>Go≈õƒá</label>
                    <div style="padding: 8px; background: #1a1a1a; border-radius: 4px; font-size: 12px;" id="editGuestName"></div>
                </div>
                <div class="form-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <label for="editGuestTypeSelect">Typ Go≈õcia</label>
                        <button type="button" class="btn btn-secondary btn-small" onclick="openAddGuestTypeModalFromEdit()">+ Nowy Typ</button>
                    </div>
                    <select class="form-control" id="editGuestTypeSelect">
                        <option value="">Wybierz typ...</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" onclick="closeEditGuestModal()">Anuluj</button>
                    <button type="submit" class="btn btn-primary">Zapisz</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal dodawania grupy medi√≥w -->
    <div class="modal" id="addMediaGroupModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Nowa Grupa Medi√≥w</h2>
                <button type="button" class="modal-close" onclick="closeAddMediaGroupModal()">&times;</button>
            </div>
            <form id="addMediaGroupForm">
                <div class="form-group">
                    <label for="groupName">Nazwa grupy *</label>
                    <input type="text" class="form-control" id="groupName" required>
                </div>
                <div class="form-group">
                    <label for="groupDescription">Opis</label>
                    <textarea class="form-control" id="groupDescription" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" onclick="closeAddMediaGroupModal()">Anuluj</button>
                    <button type="submit" class="btn btn-primary">Utw√≥rz</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal zarzƒÖdzania grupƒÖ -->
    <div class="modal" id="manageMediaGroupModal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2 id="manageGroupTitle">ZarzƒÖdzanie GrupƒÖ</h2>
                <button type="button" class="modal-close" onclick="closeManageMediaGroupModal()">&times;</button>
            </div>
            <input type="hidden" id="manageGroupId">
            
            <div class="form-group">
                <label for="manageGroupName">Nazwa grupy</label>
                <input type="text" class="form-control" id="manageGroupName">
            </div>
            <div class="form-group">
                <label for="manageGroupDescription">Opis</label>
                <textarea class="form-control" id="manageGroupDescription" rows="2"></textarea>
            </div>
            
            <div style="margin-top: 20px;">
                <h4 style="margin-bottom: 10px;">Media w grupie:</h4>
                <div id="groupMediaList" style="max-height: 300px; overflow-y: auto; border: 1px solid #333; border-radius: 4px; padding: 10px;">
                    <div style="text-align: center; padding: 20px; color: #666; font-size: 11px;">
                        Brak medi√≥w w grupie
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" onclick="deleteMediaGroup()" id="deleteGroupBtn">Usu≈Ñ Grupƒô</button>
                <button type="button" class="btn" onclick="closeManageMediaGroupModal()">Zamknij</button>
                <button type="button" class="btn btn-primary" onclick="updateMediaGroup()">Zapisz Zmiany</button>
            </div>
        </div>
    </div>

    <!-- Modal dodawania/edycji typu kamery -->
    <div class="modal" id="cameraTypeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalCameraTitle">Nowy Typ Kamery</h2>
                <button type="button" class="modal-close" onclick="closeCameraTypeEditModal()">&times;</button>
            </div>
            <form id="cameraTypeForm" onsubmit="saveCameraType(event)">
                <input type="hidden" id="cameraTypeId">
                
                <div class="form-group">
                    <label for="cameraTypeName">Nazwa typu *</label>
                    <input type="text" class="form-control" id="cameraTypeName" required>
                    <small style="color: #888; font-size: 9px;">Np. "Tablica", "PTZ Sala", "Mobilna"</small>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn" onclick="closeCameraTypeEditModal()">Anuluj</button>
                    <button type="submit" class="btn btn-primary">Zapisz</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/static/js/socket.io.min.js"></script>
    <script src="/static/js/controller.js"></script>
    <script src="/static/js/settings.js"></script>
    <script src="/static/js/seasons.js"></script>
    <script src="/static/js/episodes-manager.js"></script>
    <script src="/static/js/media_modal.js"></script>
    <script src="/static/js/vlc_group_modal.js"></script>
    <script src="/static/js/camera_type_modal.js"></script>
    <script src="/static/js/microphone_modal.js"></script>
    <script src="/static/js/volume_control.js"></script>
    <script src="/static/js/cameras.js"></script>
</body>
</html>